<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>王星个人网站</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="css/mui.min.css">
    <link rel="stylesheet" href="css/newIndex.css">
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/mui.min.js"></script>
    <script type="text/javascript" src="js/icon.js"></script>
</head>
<style>
    .listItem{
        margin-right: -100px;
    }
    .listItem-img{
        max-width:150px !important;
        height: 100px !important;
    }
    .mui-table-view-cell>a:not(.mui-btn) {
        white-space: normal;
    }
    .mui-table-view-chevron .mui-table-view-cell>a:not(.mui-btn) {
        margin-right: -100px;
    }
    .mui-navigate-right:after, .mui-push-right:after {
        right: 45px;
    }
    .listItem-body{
        white-space: nowrap;
        text-overflow: ellipsis;
        font-size: 16px;
        line-height: 30px;
    }
    .listItem-p{
        -webkit-box-orient: vertical;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        text-overflow: ellipsis;
        overflow: hidden;
        font-size: 12px;
        line-height: 22px;
        white-space: normal;
        text-overflow: ellipsis;
    }
</style>
<body>
<div id="offCanvasWrapper" class="mui-off-canvas-wrap mui-draggable">
    <!--侧滑菜单部分-->
    <aside id="offCanvasSide" class="mui-off-canvas-left">
        <div id="offCanvasSideScroll" class="mui-scroll-wrapper">
            <div class="mui-scroll">
                <div class="title">
                    <img src="img/favicon.ico"/>
                    <span style="color: #ffffff">王星个人网站</span>
                </div>
                <div class="content">
                    <ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted">
                        <li class="mui-table-view-cell">
                            <a class="mui-navigate-right" href="#" onclick="window.location.href = 'index.html'">
                                主页
                            </a>
                        </li>
                        <li class="mui-table-view-cell mui-collapse"><a class="mui-navigate-right">About me</a>
                            <ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted">
                                <li class="mui-table-view-cell"><a class="mui-navigate-right" href="#" onclick="window.location.href = 'aboutMe.html'">关于我</a>
                                </li>
                                <!--<li class="mui-table-view-cell"><a class="mui-navigate-right" href="#" onclick="window.location.href = 'myExperience.html'">我的经历</a>
                                </li>-->
                            </ul>
                        </li>
                        <li class="mui-table-view-cell mui-collapse"><a class="mui-navigate-right" href="#">我的项目</a>
                            <ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted">
                                <li class="mui-table-view-cell"><a class="mui-navigate-right" onclick="window.location.href = 'http://iwangxing.cn/joke/joke.html'" >笑话大全</a>
                                </li>
                                <li class="mui-table-view-cell"><a class="mui-navigate-right" onclick="window.location.href = 'http://iwangxing.cn/webAPP/app_mobile.html'" >webAPP阅读器模块</a>
                                </li>
                                <li class="mui-table-view-cell"><a class="mui-navigate-right" onclick="window.location.href = 'https://iwangxing.cn/2048/2048.html'" >2048小游戏</a>
                                </li>
                                <li class="mui-table-view-cell"><a class="mui-navigate-right" onclick="window.location.href = 'https://iwangxing.cn/@Media/src/index.html'" >响应式首页</a>
                                </li>
                                <li class="mui-table-view-cell"><a class="mui-navigate-right" onclick="window.location.href = 'http://iwangxing.cn/xianlvyou/xian.html'" >西安旅游网</a>
                                </li>
                                <li class="mui-table-view-cell"><a class="mui-navigate-right" onclick="window.location.href = 'http://iwangxing.cn/canvas-clock/clock.html'">clock</a>
                                </li>
                            </ul>
                        </li>
                        <li class="mui-table-view-cell mui-collapse"><a class="mui-navigate-right" href="#">我的博客</a>
                            <ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted">
                                <li class="mui-table-view-cell">
                                    <a class="mui-navigate-right" onclick="window.location.href = 'readingList.html?frontEnd'">
                                        前端
                                        <!--<span class="mui-badge mui-badge-success">123</span>-->
                                    </a>
                                </li>

                            </ul>
                        </li>
                        <li class="mui-table-view-cell mui-collapse"><a class="mui-navigate-right" href="#">我的爱好</a>
                            <ul class="mui-table-view mui-table-view-chevron mui-table-view-inverted">
                                <li class="mui-table-view-cell">
                                    <a class="mui-navigate-right" onclick="window.location.href = 'readingList.html?book'">
                                        读书
                                        <!-- <span class="mui-badge mui-badge-success">3</span>-->
                                    </a>
                                </li>
                                <li class="mui-table-view-cell">
                                    <a class="mui-navigate-right" onclick="window.location.href = 'readingList.html?movie'">
                                        电影
                                        <!--<span class="mui-badge mui-badge-success">123</span>-->
                                    </a>
                                </li>
                                <li class="mui-table-view-cell">
                                    <a class="mui-navigate-right" onclick="window.location.href = 'readingList.html?sport'">
                                        体育
                                        <!--<span class="mui-badge mui-badge-success">123</span>-->
                                    </a>
                                </li>
                                <li class="mui-table-view-cell">
                                    <a class="mui-navigate-right" onclick="window.location.href =  'readingList.html?travel'">
                                        旅游
                                        <!--<span class="mui-badge mui-badge-success">123</span>-->
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <p style="margin: 10px 15px;">
                        <button id="offCanvasHide" type="button" class="mui-btn mui-btn-danger mui-btn-block" style="padding: 5px 20px;margin-top: 30px;">关闭</button>
                    </p>

                </div>
            </div>
        </div>
    </aside>
    <!--主界面部分-->
    <div class="mui-inner-wrap main-content">
        <div id="offCanvasContentScroll" class="mui-content mui-scroll-wrapper">
            <div class="mui-scroll">
                <header class="mui-bar mui-bar-nav">
                    <a id="goBack" class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
                    <h1 class="mui-title" id="mainTitle">阅读</h1>
                </header>
                <div class="mui-content" id="mui-main-content">
                </div>
            </div>
        </div>
        <div class="mui-off-canvas-backdrop"></div>
    </div>
</div>
</body>
<script>
    var slider = mui("#slider");
    mui.init(
            slider.slider({interval: 3000})
    );
    $(function () {
        /*确认是图书还是电影*/
        var thisURL = document.URL;
        var type =thisURL.split('?')[1];

       if(type=="book"){
           $("#mainTitle").text("我的书单");
           var bookNum=data[1].length;
           localStorage.setItem(item[1],bookNum);
           var url="https://api.douban.com/v2/book/isbn/";
            for(var i=0;i<data[1].length;i++){
                getListItem(data[1][i].id,url,type,i);
            }
        }else if(type=="movie"){
           $("#mainTitle").text("我的影单");
           var movieNum=data[0].length;
           var url="https://api.douban.com/v2/movie/subject/";
           localStorage.setItem(item[0],movieNum);
           for(var i=0;i<data[0].length;i++){
               getListItem(data[0][i].id,url,type,i);
           }
        }else if(type=="sport"){
           $("#mainTitle").text("体育");
           var sportNum=data[2].length;
           localStorage.setItem(item[2],sportNum);
           for(var i=0;i<data[2].length;i++){
               var strHtml='';
               strHtml+='<ul class="mui-table-view mui-table-view-chevron" style="margin-top: 10px" onclick="window.location.href = \'readingDetail.html?'+type+'?'+i+'\'">';
               strHtml+='<li class="mui-table-view-cell mui-media">';
               strHtml+='<a class="mui-navigate-right listItem">';
               strHtml+='<img class="mui-media-object mui-pull-left listItem-img" src="'+data[2][i].image+'">';
               strHtml+='<div class="mui-media-body listItem-body">'+data[2][i].title;
               strHtml+='<p class="mui-ellipsis  listItem-p">'+data[2][i].summary+'</p>';
               strHtml+='</div></a></li></ul>';
               $("#mui-main-content").append(strHtml);
           }
       }else if(type=="travel"){
           $("#mainTitle").text("旅行");
           var travelNum=data[3].length;
           localStorage.setItem(item[3],travelNum);
           for(var i=0;i<data[3].length;i++){
               var strHtml='';
               strHtml+='<ul class="mui-table-view mui-table-view-chevron" style="margin-top: 10px" onclick="window.location.href = \'readingDetail.html?'+type+'?'+i+'\'">';
               strHtml+='<li class="mui-table-view-cell mui-media">';
               strHtml+='<a class="mui-navigate-right listItem">';
               strHtml+='<img class="mui-media-object mui-pull-left listItem-img" src="'+data[3][i].image+'">';
               strHtml+='<div class="mui-media-body listItem-body">'+data[3][i].title;
               strHtml+='<p class="mui-ellipsis  listItem-p">'+data[3][i].summary+'</p>';
               strHtml+='</div></a></li></ul>';
               $("#mui-main-content").append(strHtml);
           }
       }else if(type=="frontEnd"){
           $("#mainTitle").text("前端");
           var frontEndNum=data[4].length;
           localStorage.setItem(item[4],frontEndNum);
           for(var i=0;i<data[4].length;i++) {
               var strHtml = '';
               strHtml += '<ul class="mui-table-view mui-table-view-chevron" style="margin-top: 10px" onclick="window.location.href = \'readingDetail.html?' + type + '?' + i + '\'">';
               strHtml += '<li class="mui-table-view-cell mui-media">';
               strHtml += '<a class="mui-navigate-right listItem">';
               strHtml += '<img class="mui-media-object mui-pull-left listItem-img" src="' + data[4][i].image + '">';
               strHtml += '<div class="mui-media-body listItem-body">' + data[4][i].title;
               strHtml += '<p class="mui-ellipsis  listItem-p">' + data[4][i].summary + '</p>';
               strHtml += '</div></a></li></ul>';
               $("#mui-main-content").append(strHtml);
           }
       }




         $.ajax({
         url: "https://api.douban.com/v2/book/isbn/9787221058041",
         type: 'GET',
         dataType: 'JSONP',
         success: function (data) {
         console.log(data);
         },
         fail:function (error) {
         console.log(error);
         }
         });
       /*$.ajax({
            url: "https://api.douban.com/v2/movie/subject/24875534",
            type: 'GET',
            dataType: 'JSONP',
            success: function (data) {
                console.log(data);
            },
            fail:function (error) {
                console.log(error);
            }
        });*/


    });
</script>
<script type="text/javascript" src="js/common.js"></script>
<script type="text/javascript" src="js/data.js"></script>
</html>